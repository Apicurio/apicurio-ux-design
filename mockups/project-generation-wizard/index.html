<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apicurio Project Generation Wizard Mockup</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.47.1/css/patternfly.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.47.1/css/patternfly-additions.min.css" />
    <link rel="stylesheet" href="https://rawgit.com/Apicurio/apicurio-studio/master/front-end/studio/src/styles.css" />
    <link rel="stylesheet" href="styles.css" />

    <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.47.1/js/patternfly.min.js"></script>
</head>
<body class="cards-pf">
    <nav class="navbar navbar-default navbar-pf" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <img src="/assets/img/brand.svg" alt="Apicurio Project Generation Wizard" />
            </a>
        </div>
    </nav>

    <div class="container-fluid">

        <button class="btn btn-default wizard-pf-open wizard-pf-complete" style="margin-top: 30px" data-target="#complete">Launch wizard</button>

        <div class="modal" id="complete" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg wizard-pf">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
                            <span class="pficon pficon-close"></span>
                        </button>
                        <h4 class="modal-title">Project Generation Wizard</h4>
                    </div>
                    <div class="modal-body wizard-pf-body clearfix">
                        <div class="wizard-pf-steps hidden">
                            <ul class="wizard-pf-steps-indicator wizard-pf-steps-alt-indicator active">

                                <li class="wizard-pf-step active">
                                    <a href="#">
                                        <span class="wizard-pf-step-number">1</span>
                                        <span class="wizard-pf-step-title">Generation Type</span>
                                        <!--<span class="wizard-pf-step-title-substep active">details</span>-->
                                        <!--<span class="wizard-pf-step-title-substep">Settings</span>-->
                                    </a>
                                </li>

                                <li class="wizard-pf-step">
                                    <a href="#">
                                        <span class="wizard-pf-step-number">2</span>
                                        <span class="wizard-pf-step-title">Project Type</span>
                                        <!--<span class="wizard-pf-step-title-substep">details</span>-->
                                        <!--<span class="wizard-pf-step-title-substep">settings</span>-->
                                    </a>
                                </li>

                                <li class="wizard-pf-step">
                                    <a href="#">
                                        <span class="wizard-pf-step-number">3</span>
                                        <span class="wizard-pf-step-title">Download/Publish</span>
                                        <!--<span class="wizard-pf-step-title-substep">summary</span>-->
                                        <!--<span class="wizard-pf-step-title-substep">progress</span>-->
                                    </a>
                                </li>

                                <li class="wizard-pf-step">
                                    <a href="#">
                                        <span class="wizard-pf-step-number">4</span>
                                        <span class="wizard-pf-step-title">Publish</span>
                                        <!--<span class="wizard-pf-step-title-substep">summary</span>-->
                                        <!--<span class="wizard-pf-step-title-substep">progress</span>-->
                                    </a>
                                </li>
                            </ul>

                            <!--<ul class="wizard-pf-steps-alt">-->
                                <!--<li class="wizard-pf-step-alt viewed">-->
                                    <!--<a href="#">-->
                                        <!--<span class="wizard-pf-step-alt-number">1</span>-->
                                        <!--<span class="wizard-pf-step-alt-title">First Step</span>-->
                                    <!--</a>-->
                                    <!--<ul>-->
                                        <!--<li class="wizard-pf-step-alt-substep active"><a href="">1A. Details</a></li>-->
                                        <!--<li class="wizard-pf-step-alt-substep disabled"><a href="#">1B. Settings</a></li>-->
                                    <!--</ul>-->
                                <!--</li>-->

                                <!--<li class="wizard-pf-step-alt">-->
                                    <!--<a href="#">-->
                                        <!--<span class="wizard-pf-step-alt-number">2</span>-->
                                        <!--<span class="wizard-pf-step-alt-title">Second Step</span>-->
                                    <!--</a>-->
                                    <!--<ul class="hidden">-->
                                        <!--<li class="wizard-pf-step-alt-substep disabled"><a href="#">2A. Details</a></li>-->
                                        <!--<li class="wizard-pf-step-alt-substep disabled"><a href="#">2B. Settings</a></li>-->
                                    <!--</ul>-->
                                <!--</li>-->

                                <!--<li class="wizard-pf-step-alt">-->
                                    <!--<a  href="#">-->
                                        <!--<span class="wizard-pf-step-alt-number">3</span>-->
                                        <!--<span class="wizard-pf-step-alt-title">Review</span>-->
                                    <!--</a>-->
                                    <!--<ul class="hidden">-->
                                        <!--<li class="wizard-pf-step-alt-substep disabled"><a href="#">3A. Summary</a></li>-->
                                        <!--<li class="wizard-pf-step-alt-substep disabled"><a href="#">3B. Progress</a></li>-->
                                    <!--</ul>-->
                                <!--</li>-->

                            <!--</ul>-->

                        </div>

                        <div class="wizard-pf-row" style="height: 400px">
                            <div class="wizard-pf-sidebar hidden" style="display: none">
                                <ul class="list-group">
                                    <li class="list-group-item active">
                                        <a href="#">
                                            <span class="wizard-pf-substep-number">1A.</span>
                                            <span class="wizard-pf-substep-title">One</span>
                                        </a>
                                    </li>
                                    <!--<li class="list-group-item">-->
                                        <!--<a href="#">-->
                                            <!--<span class="wizard-pf-substep-number">1B.</span>-->
                                            <!--<span class="wizard-pf-substep-title">Settings</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                </ul>
                                <ul class="list-group hidden">
                                    <li class="list-group-item">
                                        <a href="#">
                                            <span class="wizard-pf-substep-number">2A.</span>
                                            <span class="wizard-pf-substep-title">Two</span>
                                        </a>
                                    </li>
                                    <!--<li class="list-group-item">-->
                                        <!--<a href="#">-->
                                            <!--<span class="wizard-pf-substep-number">2B.</span>-->
                                            <!--<span class="wizard-pf-substep-title">Settings</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                </ul>
                                <ul class="list-group hidden">
                                    <li class="list-group-item">
                                        <a>
                                            <span class="wizard-pf-substep-number">3A.</span>
                                            <span class="wizard-pf-substep-title">Three</span>
                                        </a>
                                    </li>
                                    <!--<li class="list-group-item">-->
                                    <!--<a>-->
                                    <!--<span class="wizard-pf-substep-number">3B.</span>-->
                                    <!--<span class="wizard-pf-substep-title">Progress</span>-->
                                    <!--</a>-->
                                    <!--</li>-->
                                </ul>
                                <ul class="list-group hidden">
                                    <li class="list-group-item">
                                        <a>
                                            <span class="wizard-pf-substep-number">4A.</span>
                                            <span class="wizard-pf-substep-title">Four</span>
                                        </a>
                                    </li>
                                </ul>
                                <ul class="list-group hidden">
                                    <li class="list-group-item">
                                        <a>
                                            <span class="wizard-pf-substep-number">5A.</span>
                                            <span class="wizard-pf-substep-title">Five</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <!-- /.wizard-pf-sidebar -->
                            <div class="wizard-pf-main">
                                <div class="wizard-pf-loading blank-slate-pf">
                                    <div class="spinner spinner-lg blank-slate-pf-icon"></div>
                                    <h3 class="blank-slate-pf-main-action">Loading Wizard</h3>
                                    <p class="blank-slate-pf-secondary-action">Lorem ipsum dolor sit amet, porta at suspendisse ac, ut wisi
                                        vivamus, lorem sociosqu eget nunc amet. </p>
                                </div>
                                <!-- Generation Type -->
                                <div class="wizard-pf-contents hidden">
                                    <form class="form-horizontal">
                                        <div class="form-group required">
                                            <div class="col-sm-10">
                                                <input type="radio" name="generation-type" name="" id="gentype-bootstrap">
                                                <label for="gentype-bootstrap">Bootstrap a new implementation project</label>
                                                <p class="moreInfo" style="padding-left: 15px">
                                                    Choose this option if you want to create a brand new project from this
                                                    API.  All boilerplate files will be generated.
                                                </p>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-10">
                                                <input type="radio" name="generation-type" name="" id="gentype-update">
                                                <label for="gentype-update">Update an existing implementation project</label>
                                                <p class="moreInfo" style="padding-left: 15px">
                                                    Choose this option to update an existing implementation project that was
                                                    previously generated from this same API Contract.
                                                </p>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!-- Project Type -->
                                <div class="wizard-pf-contents hidden">
                                    <form class="form-horizontal">
                                        <div class="form-group required">
                                            <label class="col-sm-2 control-label required">Type</label>
                                            <div class="col-sm-10">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
                                                        Thorntail
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">JAX-RS</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Thorntail</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Vert.x</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Spring Boot</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Node.js</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="groupId">Group ID</label>
                                            <div class="col-sm-10">
                                                <input #groupIdInput="ngModel" name="groupId" type="text" id="groupId" class="form-control" placeholder="org.example.api"
                                                       required pattern="[a-zA-Z][a-zA-Z0-9\.\-_]*" [(ngModel)]="groupId" #name="ngModel">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="artifactId">Artifact ID</label>
                                            <div class="col-sm-10">
                                                <input #artifactIdInput="ngModel" name="artifactId" type="text" id="artifactId" class="form-control" placeholder="my-api"
                                                       required pattern="[a-zA-Z][a-zA-Z0-9\.\-_]*" [(ngModel)]="artifactId" #name="ngModel">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="javaPackage">Java Package</label>
                                            <div class="col-sm-10">
                                                <input #javaPackageInput="ngModel" name="javaPackage" type="text" id="javaPackage" class="form-control" placeholder="org.example.api"
                                                       required pattern="[a-zA-Z][a-zA-Z0-9\._]*" [(ngModel)]="javaPackage" #name="ngModel">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!-- Download/Publish -->
                                <div class="wizard-pf-contents hidden">
                                    <form class="form-horizontal">
                                        <div class="form-group required">
                                            <div class="col-sm-10">
                                                <input type="radio" name="action-type" name="" id="atype-publish">
                                                <label for="atype-publish">Publish result to source control</label>
                                                <p class="moreInfo" style="padding-left: 15px">
                                                    Choose this option if you want publish the resulting generated project
                                                    to a source control system (e.g. GitHub).
                                                </p>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-10">
                                                <input type="radio" name="action-type" name="" id="atype-download">
                                                <label for="atype-download">Download result as ZIP</label>
                                                <p class="moreInfo" style="padding-left: 15px">
                                                    Choose this option to download the resulting generated project as a
                                                    ZIP file containing all of the generated resources.
                                                </p>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!-- Publish Details -->
                                <div class="wizard-pf-contents hidden api-publish">
                                    <form class="form-horizontal publishapi-form">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required">Publish To</label>
                                            <div class="col-sm-10">
                                                <span class="publish-to-option fa fa-github selected" title="Publish to GitHub"></span>
                                                <span class="publish-to-option fa fa-gitlab disabled" title="Publish to GitLab"></span>
                                                <span class="publish-to-option fa fa-bitbucket" title="Publish to Bitbucket"></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="ghOrgDD">Organization</label>
                                            <div class="col-sm-10">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" type="button" id="ghOrgDD" data-toggle="dropdown">
                                                        Apicurio
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" role="menu" aria-labelledby="ghOrgDD">
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">EricWittmann</a></li>
                                                        <li role="presentation" class="divider"></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Apicurio</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Apiman</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">WildFly</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Yellowverge</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="ghRepoDD">Repository</label>
                                            <div class="col-sm-10">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" type="button" id="ghRepoDD" data-toggle="dropdown">
                                                        apicurio-studio
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" role="menu" aria-labelledby="ghRepoDD">
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">apicurio-studio</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">apicurio-release</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">oai-ts-core</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">oai-ts-commands</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="ghBranchDD">Branch</label>
                                            <div class="col-sm-10">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" type="button" id="ghBranchDD" data-toggle="dropdown">
                                                        master
                                                        <span class="caret"></span>
                                                    </button>
                                                    <ul class="dropdown-menu" role="menu" aria-labelledby="ghBranchDD">
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">master</a></li>
                                                        <li role="presentation" class="divider"></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">release-notes</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">version-7</a></li>
                                                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">prod-updates</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label required" for="gh-resource">Location</label>
                                            <div class="col-sm-10">
                                                <input name="repository.resource" type="text" id="gh-resource" class="form-control"
                                                       placeholder="/path/to/project" required>
                                            </div>
                                        </div>
                                        <div class="form-group" *ngIf="_selectedType">
                                            <label class="col-sm-2 control-label required">Commit Message</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control"></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="wizard-pf-contents hidden">
                                    <div class="wizard-pf-process blank-slate-pf">
                                        <div class="spinner spinner-lg blank-slate-pf-icon"></div>
                                        <h3 class="blank-slate-pf-main-action">Project Generation in progress</h3>
                                        <p class="blank-slate-pf-secondary-action">Lorem ipsum dolor sit amet, porta at suspendisse ac, ut wisi
                                            vivamus, lorem sociosqu eget nunc amet. </p>
                                    </div>
                                    <div class="wizard-pf-complete blank-slate-pf hidden">
                                        <div class="wizard-pf-success-icon"><span class="glyphicon glyphicon-ok-circle"></span></div>
                                        <h3 class="blank-slate-pf-main-action">Project was successfully generated</h3>
                                        <p class="blank-slate-pf-secondary-action">Lorem ipsum dolor sit amet, porta at suspendisse ac, ut wisi
                                            vivamus, lorem sociosqu eget nunc amet. </p>
                                        <button type="button" class="btn btn-lg btn-primary">
                                            View Project
                                        </button>

                                    </div>
                                </div>
                            </div><!-- /.wizard-pf-main -->
                        </div>

                    </div><!-- /.wizard-pf-body -->

                    <div class="modal-footer wizard-pf-footer">
                        <button type="button" class="btn btn-default btn-cancel wizard-pf-cancel wizard-pf-dismiss">Cancel</button>
                        <button type="button" class="btn btn-default wizard-pf-back">
                            <span class="i fa fa-angle-left"></span>
                            Back
                        </button>
                        <button type="button" class="btn btn-primary wizard-pf-next">
                            Next
                            <span class="i fa fa-angle-right"></span>
                        </button>
                        <button type="button" class="btn btn-primary hidden wizard-pf-finish">
                            Generate
                            <span class="i fa fa-angle-right"></span>
                        </button>
                        <button type="button" class="btn btn-primary hidden wizard-pf-close wizard-pf-dismiss">Close</button>

                    </div><!-- /.wizard-pf-footer -->

                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <script>

            $(document).ready(function() {
                //initialize wizard
                var completeWizard = new wizard(".btn.wizard-pf-complete");
            });

            var wizard = function(id) {
                var self = this, modal, tabs, tabCount, tabLast, currentGroup, currentTab, contents;
                self.id = id;

                $(self.id).click(function() {
                    self.init(this)
                });

                this.init = function(button){
                    // get id of open modal
                    self.modal = $(button).data("target");

                    self.resetToInitialState();

                    // open modal
                    $(self.modal).modal('show');

                    // assign data attribute to all tabs
                    $(self.modal + " .wizard-pf-sidebar .list-group-item").each(function() {
                        // set the first digit (i.e. n.0) equal to the index of the parent tab group
                        // set the second digit (i.e. 0.n) equal to the index of the tab within the tab group
                        $(this).attr("data-tab", ($(this).parent().index() +1 + ($(this).index()/10 + .1)));
                    });
                    // assign data attribute to all tabgroups
                    $(self.modal + " .wizard-pf-sidebar .list-group").each(function() {
                        // set the value equal to the index of the tab group
                        $(this).attr("data-tabgroup", ($(this).index() +1));
                    });

                    // assign data attribute to all step indicator steps
                    $(self.modal + " .wizard-pf-steps-indicator  .wizard-pf-step").each(function() {
                        // set the value equal to the index of the tab group
                        $(this).attr("data-tabgroup", ($(this).index() +1));
                    });
                    // assign data attribute to all step indicator substeps
                    $(self.modal + " .wizard-pf-steps-indicator .wizard-pf-step-title-substep").each(function() {
                        // set the first digit (i.e. n.0) equal to the index of the parent tab group
                        // set the second digit (i.e. 0.n) equal to the index of the tab within the tab group
                        $(this).attr("data-tab", ($(this).parent().parent().index() + 1 + (($(this).index() - 2)/10 + .1)));
                    });

                    // assign data attribute to all alt step indicator steps
                    $(self.modal + " .wizard-pf-steps-alt .wizard-pf-step-alt").each(function() {
                        // set the value equal to the index of the tab group
                        var tabGroup = $(this).index() + 1;
                        $(this).attr("data-tabgroup", tabGroup);
                        $(this).find('.wizard-pf-step-alt-substep').each(function() {
                            $(this).attr("data-tab", (tabGroup + (($(this).index() + 1)/10)));
                        });
                    });

                    // assign active and hidden states to teh steps alt classes
                    $(self.modal + " .wizard-pf-steps-alt-indicator").removeClass('active');
                    $(self.modal + " .wizard-pf-steps-alt").addClass('hidden');
                    $(self.modal + " .wizard-pf-steps-alt-indicator").on('click', function() {
                        $(self.modal + ' .wizard-pf-steps-alt-indicator').toggleClass('active');
                        $(self.modal + ' .wizard-pf-steps-alt').toggleClass('hidden');
                    });
                    $(self.modal + " .wizard-pf-step-alt > ul").addClass("hidden");

                    // create array of all tabs, using the data attribute, and determine the last tab
                    self.tabs = $(self.modal + " .wizard-pf-sidebar .list-group-item" ).map(function()
                        {
                            return $(this).data("tab");
                        }
                    );
                    self.tabCount = self.tabs.length;
                    self.tabSummary = self.tabs[self.tabCount - 2]; // second to last tab displays summary
                    self.tabLast = self.tabs[self.tabCount - 1]; // last tab displays progress
                    // set first tab group and tab as current tab
                    // if someone wants to target a specific tab, that could be handled here
                    self.currentGroup = 1;
                    self.currentTab = 1.1;

                    setTimeout(function() {
                        // hide loading message
                        $(self.modal + " .wizard-pf-loading").addClass("hidden");
                        // show tabs and tab groups
                        $(self.modal + " .wizard-pf-steps").removeClass("hidden");
                        $(self.modal + " .wizard-pf-sidebar").removeClass("hidden");
                        // remove active class from all tabs
                        $(self.modal + " .wizard-pf-sidebar .list-group-item.active").removeClass("active");

                        self.updateToCurrentPage();
                    }, 1000);

                    //initialize click listeners
                    self.tabGroupSelect();
                    self.tabSelect();
                    self.altStepClick();
                    self.altSubStepClick();
                    self.backBtnClicked();
                    self.nextBtnClicked();
                    self.finishBtnClick();
                    self.cancelBtnClick();

                    // Listen for required value change
                    self.detailsNameChange();
                };

                // update which tab group is active
                this.updateTabGroup = function() {
                    $(self.modal + " .wizard-pf-step.active").removeClass("active");
                    $(self.modal + " .wizard-pf-step[data-tabgroup='" + self.currentGroup + "']").addClass("active");
                    $(self.modal + " .wizard-pf-sidebar .list-group").addClass("hidden");
                    $(self.modal + " .list-group[data-tabgroup='" + self.currentGroup + "']").removeClass("hidden");
                    $(self.modal + " .wizard-pf-step-alt[data-tabgroup='" + self.currentGroup + "']").addClass("viewed");
                    $(self.modal + " .wizard-pf-step-alt > ul").addClass("hidden");
                    $(self.modal + " .wizard-pf-step-alt[data-tabgroup='" + self.currentGroup + "'] > ul").removeClass("hidden");
                };

                // update which tab is active
                this.updateActiveTab = function() {
                    $(self.modal + " .list-group-item.active").removeClass("active");
                    $(self.modal + " .list-group-item[data-tab='" + self.currentTab + "']").addClass("active");

                    // Update steps indicator to handle mobile mode
                    $(self.modal + " .wizard-pf-steps-indicator .wizard-pf-step-title-substep").removeClass("active");
                    $(self.modal + " .wizard-pf-steps-indicator .wizard-pf-step-title-substep[data-tab='" + self.currentTab + "']").addClass("active");

                    // Update steps alt indicator to handle mobile mode
                    $(self.modal + " .wizard-pf-step-alt .wizard-pf-step-alt-substep").removeClass("active");
                    $(self.modal + " .wizard-pf-step-alt .wizard-pf-step-alt-substep[data-tab='" + self.currentTab + "']").addClass("active");

                    self.updateVisibleContents();
                };

                // update which contents are visible
                this.updateVisibleContents = function() {
                    var tabIndex = ($.inArray(self.currentTab, self.tabs));
                    // displaying contents associated with currentTab
                    $(self.modal + " .wizard-pf-contents").addClass("hidden");
                    $(self.modal + " .wizard-pf-contents:eq(" + tabIndex + ")").removeClass("hidden");
                    // setting focus to first form field in active contents
                    setTimeout (function() {
                        $(".wizard-pf-contents:not(.hidden) form input, .wizard-pf-contents:not(.hidden) form textarea, .wizard-pf-contents:not(.hidden) form select").first().focus(); // this does not account for disabled or read-only inputs
                    }, 100);
                };

                // update display state of Back button
                this.updateBackBtnDisplay = function() {
                    if (self.currentTab == self.tabs[0]) {
                        $(self.modal + " .wizard-pf-back").addClass("disabled");
                    } else {
                        $(self.modal + " .wizard-pf-back").removeClass("disabled");
                    }
                };

                // update display state of next/finish button
                this.updateNextBtnDisplay = function() {
                    if (self.currentTab == self.tabSummary) {
                        $(self.modal + " .wizard-pf-next").addClass("hidden");
                        $(self.modal + " .wizard-pf-finish").removeClass("hidden");
                    } else {
                        $(self.modal + " .wizard-pf-finish").addClass("hidden");
                        $(self.modal + " .wizard-pf-next").removeClass("hidden");
                    }
                };

                // update display state of buttons in the footer
                this.updateWizardFooterDisplay = function() {
                    self.updateBackBtnDisplay();
                    self.updateNextBtnDisplay();
                };


                this.updateToCurrentPage = function() {
                    self.updateTabGroup();
                    self.updateActiveTab();

                    self.updateVisibleContents();

                    if (self.currentTab === self.tabLast) {
                        $(self.modal + " .wizard-pf-next").addClass("hidden");
                        $(self.modal + " .wizard-pf-finish").removeClass("hidden");
                        self.finish();
                    } else {
                        // show/hide/disable/enable buttons if needed
                        self.updateWizardFooterDisplay();
                    }
                };

                // when the user clicks a step, then the tab group for that step is displayed
                this.tabGroupSelect = function() {
                    $(self.modal + " .wizard-pf-step>a").click(function() {
                        self.currentGroup = $(this).parent().data("tabgroup");
                        // update value for currentTab -- if a tab is already marked as active
                        // for the new tab group, use that, otherwise set it to the first tab
                        // in the tab group
                        self.currentTab = $(self.modal + " .list-group[data-tabgroup='" + self.currentGroup + "'] .list-group-item.active").data("tab");
                        if (self.currentTab === undefined) {
                            self.currentTab = self.currentGroup + 0.1;
                        }

                        self.updateToCurrentPage();
                    });
                };

                // when the user clicks a tab, then the tab contents are displayed
                this.tabSelect = function() {
                    $(self.modal + " .wizard-pf-sidebar .list-group-item>a").click(function() {
                        // update value of currentTab to new active tab
                        self.currentTab = $(this).parent().data("tab");
                        self.updateToCurrentPage();
                    });
                };

                this.altStepClick = function() {
                    $(self.modal + " .wizard-pf-step-alt").each(function() {
                        var $this = $(this);
                        $this.find('> a').on('click', function() {
                            var subStepList = $this.find('> ul');
                            if (subStepList && (subStepList.length > 0)) {
                                $this.find('> ul').toggleClass('hidden');
                            } else {
                                self.currentGroup = $this.data("tabgroup");
                            }
                        });
                    });
                };

                this.altSubStepClick = function() {
                    $(self.modal + " .wizard-pf-step-alt .wizard-pf-step-alt-substep > a").on('click', function() {
                        // update value of currentTab to new active tab
                        self.currentTab = $(this).parent().data("tab");
                        self.currentGroup = $(this).parent().parent().parent().data("tabgroup");

                        self.updateToCurrentPage();
                    });
                };
                // Back button clicked
                this.backBtnClicked = function() {
                    $(self.modal + " .wizard-pf-back").click(function() {
                        // if not the first page
                        if (self.currentTab != self.tabs[0]) {
                            // go back a page (i.e. -1)
                            self.wizardPaging(-1);
                            // show/hide/disable/enable buttons if needed
                            self.updateWizardFooterDisplay();
                        }
                    });
                };

                // Next button clicked
                this.nextBtnClicked = function() {
                    $(self.modal + " .wizard-pf-next").click(function() {
                        // go forward a page (i.e. +1)
                        self.wizardPaging(1);
                        // show/hide/disable/enable buttons if needed
                        self.updateWizardFooterDisplay();
                    });
                };

                // Finish button clicked
                // Deploy/Finish button would only display during the second to last step.
                this.finishBtnClick = function() {
                    $(self.modal + " .wizard-pf-finish").click(function() {
                        self.wizardPaging(1);
                        self.finish();
                    });
                };

                this.detailsNameChange = function() {
                    $(self.modal + " #detailsName").on('change', function() {
                        if ($(self.modal + " #detailsName").val()) {
                            $(self.modal + " .wizard-pf-step-alt-substep").removeClass('disabled');
                            $(self.modal + " .wizard-pf-next").removeClass("disabled");
                        } else {
                            $(self.modal + " .wizard-pf-step-alt-substep").addClass('disabled');
                            $(self.modal + " .wizard-pf-step-alt-substep.active").removeClass('disabled');
                            $(self.modal + " .wizard-pf-next").addClass("disabled");
                        }
                    });
                };

                this.resetToInitialState = function() {
                    // drop click event listeners
                    $(self.modal + " .wizard-pf-step>a").off("click");
                    $(self.modal + " .wizard-pf-sidebar .list-group-item>a").off("click");
                    $(self.modal + " .wizard-pf-steps-alt-indicator").off('click');
                    $(self.modal + " .wizard-pf-step-alt > a").off('click');
                    $(self.modal + " .wizard-pf-back").off("click");
                    $(self.modal + " .wizard-pf-next").off("click");
                    $(self.modal + " .wizard-pf-finish").off("click");
                    $(self.modal + " .wizard-pf-dismiss").off("click");

                    $(self.modal + " #detailsName").off('change');

                    // reset final step
                    $(self.modal + " .wizard-pf-process").removeClass("hidden");
                    $(self.modal + " .wizard-pf-complete").addClass("hidden");
                    // reset loading message
                    $(self.modal + " .wizard-pf-contents").addClass("hidden");
                    $(self.modal + " .wizard-pf-loading").removeClass("hidden");
                    // remove tabs and tab groups
                    $(self.modal + " .wizard-pf-steps").addClass("hidden");
                    $(self.modal + " .wizard-pf-sidebar").addClass("hidden");
                    // reset buttons in final step
                    $(self.modal + " .wizard-pf-close").addClass("hidden");
                    $(self.modal + " .wizard-pf-cancel").removeClass("hidden");
                };

                // Cancel/Close button clicked
                this.cancelBtnClick = function() {
                    $(self.modal + " .wizard-pf-dismiss").click(function() {
                        // close the modal
                        $(self.modal).modal('hide');
                        self.resetToInitialState();
                    });
                };

                // when the user clicks Next/Back, then the next/previous tab and contents display
                this.wizardPaging = function(direction) {
                    // get n.n value of next tab using the index of next tab in tabs array
                    var tabIndex = ($.inArray(self.currentTab, self.tabs)) + direction;
                    var newTab = self.tabs[tabIndex];
                    // add/remove active class from current tab group
                    // included math.round to trim off extra .000000000002 that was getting added
                    if (newTab != Math.round(10*(direction*.1 + self.currentTab))/10) {
                        // this statement is true when the next tab is in the next tab group
                        // if next tab is in next tab group (e.g. next tab data-tab value is
                        // not equal to current tab +.1) then apply active class to next
                        // tab group and step, and update the value for var currentGroup +/-1
                        self.currentGroup = self.currentGroup + direction;
                        self.updateTabGroup();
                    }
                    self.currentTab = newTab;
                    // remove active class from active tab in current tab group
                    $(self.modal + " .list-group[data-tabgroup='" + self.currentGroup + "'] .list-group-item.active").removeClass("active");
                    // apply active class to new current tab and associated contents
                    self.updateActiveTab();
                };

                // This code keeps the same contents div active, but switches out what
                // contents display in that div (i.e. replaces process message with
                // success message).
                this.finish = function() {
                    $(self.modal + " .wizard-pf-back").addClass("disabled"); // if Back remains enabled during this step, then the Close button needs to be removed when the user clicks Back
                    $(self.modal + " .wizard-pf-finish").addClass("disabled");
                    // code for kicking off process goes here
                    // the next code is just to simulate the expected experience, in that
                    // when the process is complete, the success message etc. would display
                    setTimeout (function() {
                        $(self.modal + " .wizard-pf-cancel").addClass("hidden");
                        $(self.modal + " .wizard-pf-finish").addClass("hidden");
                        $(self.modal + " .wizard-pf-close").removeClass("hidden");
                        $(self.modal + " .wizard-pf-process").addClass("hidden");
                        $(self.modal + " .wizard-pf-complete").removeClass("hidden");
                    }, 3000);
                };

            };

        </script>

    </div>
</body>
</html>